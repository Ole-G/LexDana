<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mermaid Minimal Test</title>
</head>
<body>
  <h1>Mermaid Minimal Test</h1>

  <div id="mermaid-container"></div>

  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    const diagram = `
flowchart TD
    A[Start] --> B[End]
`;

    mermaid.initialize({
      startOnLoad: false
    });

    document.addEventListener('DOMContentLoaded', () => {
      // Optional debug: see exactly what is passed to Mermaid
      console.log('Diagram string:', JSON.stringify(diagram));

      // IMPORTANT: trim() removes any leading/trailing blank lines
      const clean = diagram.trim();

      // Extra debug: check parse first
      try {
        mermaid.parse(clean);
        console.log('Parse OK');

        mermaid
          .render('simpleGraph', clean)
          .then(({ svg }) => {
            document.getElementById('mermaid-container').innerHTML = svg;
          })
          .catch(err => {
            console.error('Render error:', err);
          });
      } catch (e) {
        console.error('Parse error:', e);
      }
    });
  </script>
</body>
</html>
